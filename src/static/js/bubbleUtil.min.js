/* eslint-disable */
(function(m){"function"===typeof define&&define.amd?define(["echarts"],m):m(echarts)})(function(m){function H(b){var a=0,c=b.children,d=c&&c.length;if(d)for(;0<=--d;)a+=c[d].value;else a=1;b.value=a}function w(b,a){var c=new r(b),d=+b.value&&(c.value=b.value),e,f=[c],k,g,l,n;for(null==a&&(a=I);e=f.pop();)if(d&&(e.value=+e.data.value),(g=a(e.data))&&(n=g.length))for(e.children=Array(n),l=n-1;0<=l;--l)f.push(k=e.children[l]=new r(g[l])),k.parent=e,k.depth=e.depth+1;return c.eachBefore(J)}function I(b){return b.children}function K(b){b.data=b.data.data}function J(b){var a=0;do b.height=a;while((b=b.parent)&&b.height<++a)}function r(b){this.data=b;this.depth=this.height=0;this.parent=null}function u(b){this._=b;this.previous=this.next=null}function L(b){if(!(e=b.length))return 0;var a,c,d,e,f,k,g,l,n;a=b[0];a.x=0;a.y=0;if(!(1<e))return a.r;c=b[1];a.x=-c.r;c.x=a.r;c.y=0;if(!(2<e))return a.r+c.r;z(c,a,d=b[2]);a=new u(a);c=new u(c);d=new u(d);a.next=d.previous=c;c.next=a.previous=d;d.next=c.previous=a;g=3;a:for(;g<e;++g){z(a._,c._,d=b[g]);d=new u(d);f=c.next;k=a.previous;l=c._.r;n=a._.r;do if(l<=n){if(A(f._,d._)){c=f;a.next=c;c.previous=a;--g;continue a}l+=f._.r;f=f.next}else{if(A(k._,d._)){a=k;a.next=c;c.previous=a;--g;continue a}n+=k._.r;k=k.previous}while(f!==k.next);d.previous=a;d.next=c;a.next=c.previous=c=d;for(f=B(a);(d=d.next)!==c;)(k=B(d))<f&&(a=d,f=k);c=a.next}a=[c._];for(d=c;(d=d.next)!==c;)a.push(d._);d=0;a=M.call(a);for(c=a.length;c;)f=Math.random()*c--|0,g=a[c],a[c]=a[f],a[f]=g;c=a.length;g=[];for(var h;d<c;)if(f=a[d],h&&C(h,f))++d;else{a:if(h=g,d=f,x(d,h))h=[d];else{for(g=0;g<h.length;++g)if(v(d,h[g])&&x(q(h[g],d),h)){h=[h[g],d];break a}for(g=0;g<h.length-1;++g)for(f=g+1;f<h.length;++f)if(v(q(h[g],h[f]),d)&&v(q(h[g],d),h[f])&&v(q(h[f],d),h[g])&&x(D(h[g],h[f],d),h)){h=[h[g],h[f],d];break a}throw Error();}a:{h=g=h;switch(h.length){case 1:h=h[0];h={x:h.x,y:h.y,r:h.r};break a;case 2:h=q(h[0],h[1]);break a;case 3:h=D(h[0],h[1],h[2]);break a}h=void 0}d=0}d=h;for(g=0;g<e;++g)a=b[g],a.x-=d.x,a.y-=d.y;return d.r}function E(){return 0}function N(b){return Math.sqrt(b.value)}function F(b){return function(a){a.children||(a.r=Math.max(0,+b(a)||0))}}function y(b,a){return function(c){if(d=c.children){var d,e,f=d.length,k=b(c)*a||0,g;if(k)for(e=0;e<f;++e)d[e].r+=k;g=L(d);if(k)for(e=0;e<f;++e)d[e].r-=k;c.r=g+k}}}function G(b){return function(a){var c=a.parent;a.r*=b;c&&(a.x=c.x+b*a.x,a.y=c.y+b*a.y)}}function z(b,a,c){var d=b.x,e=b.y,f=a.r+c.r;b=b.r+c.r;var k=a.x-d;a=a.y-e;var g=k*k+a*a;if(g){var l=.5+((b*=b)-(f*=f))/(2*g),f=Math.sqrt(Math.max(0,2*f*(b+g)-(b-=g)*b-f*f))/(2*g);c.x=d+l*k+f*a;c.y=e+l*a-f*k}else c.x=d+b,c.y=e}function A(b,a){var c=a.x-b.x,d=a.y-b.y,e=b.r+a.r;return e*e-1E-6>c*c+d*d}function B(b){var a=b._,c=b.next._,d=a.r+c.r;b=(a.x*c.r+c.x*a.r)/d;a=(a.y*c.r+c.y*a.r)/d;return b*b+a*a}function v(b,a){var c=b.r-a.r,d=a.x-b.x,e=a.y-b.y;return 0>c||c*c<d*d+e*e}function C(b,a){var c=b.r-a.r+1E-6,d=a.x-b.x,e=a.y-b.y;return 0<c&&c*c>d*d+e*e}function x(b,a){for(var c=0;c<a.length;++c)if(!C(b,a[c]))return!1;return!0}function q(b,a){var c=b.x,d=b.y,e=b.r,f=a.x,k=a.y,g=a.r,l=f-c,n=k-d,h=g-e,p=Math.sqrt(l*l+n*n);return{x:(c+f+l/p*h)/2,y:(d+k+n/p*h)/2,r:(p+e+g)/2}}function D(b,a,c){var d=b.x,e=b.y;b=b.r;var f=a.x,k=a.y,g=a.r,l=c.x,n=c.y,h=c.r;c=d-f;a=d-l;var p=e-k,m=e-n,t=g-b,q=h-b,r=d*d+e*e-b*b,k=r-f*f-k*k+g*g,n=r-l*l-n*n+h*h,l=a*p-c*m,f=(p*n-m*k)/(2*l)-d,p=(m*t-p*q)/l,m=(a*k-c*n)/(2*l)-e;c=(c*q-a*t)/l;a=p*p+c*c-1;t=2*(b+f*p+m*c);b=f*f+m*m-b*b;b=-(a?(t+Math.sqrt(t*t-4*a*b))/(2*a):b/t);return{x:d+f+p*b,y:e+m+c*b,r:b}}function O(b,a){var c=m.init(a);P(c,Q(b,a));R(c)}function Q(b,a){var c=a.style.width.replace("px",""),d=a.style.height.replace("px",""),c=m.util.pack().size([c,d]).padding(1),e=0,f="#1f77b4 #aec7e8 #ff7f0e #ffbb78 #2ca02c #98df8a #d62728 #ff9896 #9467bd #c5b0d5 #8c564b #c49c94 #e377c2 #f7b6d2 #7f7f7f #c7c7c7 #bcbd22 #dbdb8d #17becf #9edae5".split(" "),d=m.util.hierarchy({children:b}).sum(function(a){return a.value}).each(function(a){a.color=f[e%20];e++;return a.color});return c(d).leaves()}function P(b,a){var c={tooltip:{show:!0,triggerOn:"none",formatter:function(a){return'\x3cspan  style\x3d"border-radius: 6px;width: 12px;height: 12px;display: inline-block;background-color:'+a.color+'"\x3e\x3c/span\x3e '+a.data.name+":  "+a.data.value}},graphic:S(a,b),series:[]};b.setOption(c)}function S(b,a){return m.util.map(b,function(b,d){return{type:"group",id:"circleGroup"+d,bounding:"raw",color:b.color,data:b.data,children:T(b,d,a),onmousemove:function(b){a.dispatchAction({type:"showTip",x:b.offsetX,y:b.offsetY,tooltip:{formatterParams:{color:this.color,data:this.data}}});this.childOfName("mainElem").setStyle({stroke:"green",lineWidth:2})},onmouseout:function(b){a.dispatchAction({type:"hideTip"});this.childOfName("mainElem").setStyle({stroke:null})}}})}function T(b,a,c){var d=[];d.push({id:"circle"+a,type:"circle",shape:{cx:b.x,cy:b.y,r:b.r},name:"mainElem",style:{fill:b.color},eventData:{id:"circle"+a},onclick:function(){var a=new m.graphic.Circle({shape:this.shape,style:{stroke:"green",fill:null,lineWidth:2}});this.parent.add(a);c.addClickElem(a)}});d.push({type:"text",style:{fill:"#fff",text:b.data.name,x:b.x-b.r/4,y:b.y},value:b.value});return d}function R(b){b.addClickElem=function(a){this.currentElem!==a&&null!=this.currentElem&&this.currentElem.parent.remove(this.currentElem);this.currentElem=a};b._zr.on("click",function(a){null==a.target&&null!=b.currentElem&&(b.currentElem.parent.remove(b.currentElem),b.currentElem=null)});document.onclick=function(a){"CANVAS"!=a.toElement.tagName&&null!=b.currentElem&&(b.currentElem.parent.remove(b.currentElem),b.currentElem=null)}}r.prototype=w.prototype={constructor:r,count:function(){return this.eachAfter(H)},each:function(b){var a,c,d=[this],e,f;do for(c=d.reverse(),d=[];a=c.pop();)if(b(a),a=a.children)for(e=0,f=a.length;e<f;++e)d.push(a[e]);while(d.length);return this},eachAfter:function(b){for(var a,c=[this],d=[],e,f;a=c.pop();)if(d.push(a),a=a.children)for(e=0,f=a.length;e<f;++e)c.push(a[e]);for(;a=d.pop();)b(a);return this},eachBefore:function(b){for(var a,c=[this],d;a=c.pop();)if(b(a),a=a.children)for(d=a.length-1;0<=d;--d)c.push(a[d]);return this},sum:function(b){return this.eachAfter(function(a){for(var c=+b(a.data)||0,d=a.children,e=d&&d.length;0<=--e;)c+=d[e].value;a.value=c})},sort:function(b){return this.eachBefore(function(a){a.children&&a.children.sort(b)})},path:function(b){var a=this,c;c=a;var d=b;if(c!==d){var e=c.ancestors(),f=d.ancestors(),k=null;c=e.pop();for(d=f.pop();c===d;)k=c,c=e.pop(),d=f.pop();c=k}for(d=[a];a!==c;)a=a.parent,d.push(a);for(a=d.length;b!==c;)d.splice(a,0,b),b=b.parent;return d},ancestors:function(){for(var b=this,a=[b];b=b.parent;)a.push(b);return a},descendants:function(){var b=[];this.each(function(a){b.push(a)});return b},leaves:function(){var b=[];this.eachBefore(function(a){a.children||b.push(a)});return b},links:function(){var b=this,a=[];b.each(function(c){c!==b&&a.push({source:c.parent,target:c})});return a},copy:function(){return w(this).eachBefore(K)}};var U=function(b){return function(){return b}},M=Array.prototype.slice;m.util.hierarchy=w;m.util.pack=function(){function b(b){b.x=c/2;b.y=d/2;a?b.eachBefore(F(a)).eachAfter(y(e,.5)).eachBefore(G(Math.min(c,d)/(2*b.r))):b.eachBefore(F(N)).eachAfter(y(E,1)).eachAfter(y(e,b.r/Math.min(c,d))).eachBefore(G(Math.min(c,d)/(2*b.r)));return b}var a=null,c=1,d=1,e=E;b.radius=function(c){var d;if(arguments.length){if(null==c)d=null;else{if("function"!==typeof c)throw Error();d=c}d=(a=d,b)}else d=a;return d};b.size=function(a){return arguments.length?(c=+a[0],d=+a[1],b):[c,d]};b.padding=function(a){return arguments.length?(e="function"===typeof a?a:U(+a),b):e};return b};return window.renderBubbleChart=O});